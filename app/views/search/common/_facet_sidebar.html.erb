<%# Sidebar containing filterable facets.

Parameters:
- resources     - SOLR object containing results and metadata about search as returned from materials#index

Variable that should be available
- @facet_params  - The facet filters the user has applied
%>
<h3 class="nav-heading" id="sidebar-header">
  <i class="fa fa-filter"></i> Filters
  <a href="#" class="pull-right" id="sidebar-close">&times;</a>
</h3>

<div class="tess-facets">
  <%= render partial: 'search/common/facet_sidebar_search' %>
  <% if current_user && (current_user.is_curator? || current_user.is_admin?) && resource_type.method_defined?(:last_scraped) %>
    <%= render partial: 'search/common/facet_sidebar_curation' %>
  <% end %>
  <% if ['Event', 'Material'].include?(resource_type.name) %>
    <%= render partial: 'search/common/facet_sidebar_max_age' %>
    <% if resource_type.name == 'Event' %>
      <%= render partial: 'search/common/facet_sidebar_include_expired' %>
    <% end %>
  <% end %>
  <% resources.facets.select { |f| f.rows.any? }.each do |facet| %>
      <% if IGNORED_FILTERS.include?(facet.field_name.to_s)   %>
      <% else %>
          <%= render partial: 'search/common/facet_sidebar_filter.html.erb',
                     locals: { facet: facet, resources: resources } %>
      <% end %>
  <% end %>
</div>
